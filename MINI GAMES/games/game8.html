<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Game 8 â€” Snake</title>
  <link rel="stylesheet" href="../style.css">
  <link rel="stylesheet" href="../css/style.css">
  <style>canvas{background:var(--glass);border-radius:8px}</style>
</head>
<body>
  <div class="site">
    <header class="site-header"><h1>Snake</h1><a class="btn" href="../index.html">Back</a></header>
    <main class="play-area center" style="flex-direction:column;">
      <canvas id="s" width="360" height="360"></canvas>
      <div id="score" class="meta">0</div>
      <div id="best" class="meta">Best: -</div>
      <div style="margin-top:8px"><button id="start" class="btn">Start</button></div>
    </main>
  </div>
  <script>
  const canvas=document.getElementById('s'), ctx=canvas.getContext('2d'); const cell=18; let snake,dir,food,loopId,score;
  function reset(){ snake=[{x:6,y:6}]; dir={x:1,y:0}; place(); score=0; document.getElementById('score').textContent=score; }
  function place(){ food={x:Math.floor(Math.random()*(canvas.width/cell)), y:Math.floor(Math.random()*(canvas.height/cell))}; }
  function step(){ const head={x:snake[0].x+dir.x, y:snake[0].y+dir.y}; if (head.x<0||head.y<0||head.x>=canvas.width/cell||head.y>=canvas.height/cell || snake.some(s=>s.x===head.x&&s.y===head.y)){ stop(); return; } snake.unshift(head); if (head.x===food.x&&head.y===food.y){ score++; place(); document.getElementById('score').textContent=score; } else snake.pop(); draw(); }
  function draw(){ ctx.clearRect(0,0,canvas.width,canvas.height); ctx.fillStyle='#7be6ff'; snake.forEach(s=>ctx.fillRect(s.x*cell,s.y*cell,cell-2,cell-2)); ctx.fillStyle='#ff6b6b'; ctx.fillRect(food.x*cell,food.y*cell,cell-2,cell-2); }
  function start(){ reset(); loopId=setInterval(step,120); document.getElementById('start').disabled=true; }
  function stop(){ clearInterval(loopId); document.getElementById('start').disabled=false; try{ if(window.setResult) window.setResult(8, score, 'higher'); }catch(e){}; const r=window.getResult?window.getResult(8):null; document.getElementById('best').textContent = r? `Best: ${r.value}`:'Best: -'; }
  document.addEventListener('keydown', e=>{ if (e.key==='ArrowUp') dir={x:0,y:-1}; if (e.key==='ArrowDown') dir={x:0,y:1}; if (e.key==='ArrowLeft') dir={x:-1,y:0}; if (e.key==='ArrowRight') dir={x:1,y:0}; });
  document.getElementById('start').addEventListener('click', ()=> start()); reset();</script>
</body>
</html>